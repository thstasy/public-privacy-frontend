{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import Footer from\"../components/Footer.js\";import httpClient from\"../http-common.js\";import Alert from\"./Alert.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showAlert=_useState10[0],setShowAlert=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),alertMessage=_useState12[0],setAlertMessage=_useState12[1];var _useState13=useState(\"notification\"),_useState14=_slicedToArray(_useState13,2),alertType=_useState14[0],setAlertType=_useState14[1];function reloadForm(){setUsername('');setEmail('');setPassword('');}function register(_x){return _register.apply(this,arguments);}function _register(){_register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var apiResponse,_err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return httpClient.post(\"/collaborator/register\",{username:username,email:email,password:password},{withCredentials:true});case 4:apiResponse=_context.sent;if(apiResponse.status!==201){setAlertMessage(\"Sorry. Either the name or email is already taken. Please use another one.\");setAlertType(\"notification\");}else{setAlertMessage(\"Now you are a Collaborator, \".concat(username,\"!\\nAn email has been sent to the provided address. Please confirm the link in 10 minutes.\"));setAlertType(\"notification\");setTimeout(function(){navigate('/collaborator/login');},500);// 0.5 second delay\n}_context.next=14;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setErrorMessage(_context.t0===null||_context.t0===void 0?void 0:(_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data);if(_context.t0.response){if(_context.t0.response.data===\"An email address can only be registered for an account.\"){setAlertMessage(\"An email address can only be registered for an account.\");}else if(_context.t0.response.data===\"Username already exists\"){setAlertMessage(\"Username already exists\");}else if(_context.t0.response.data===\"The fields are required to be filled.\"){setAlertMessage(\"The fields are required to be filled.\");}else{setAlertMessage(\"An error occurred. Please try again.\");}}else{setAlertMessage(\"An error occurred. Please try again.\");}setAlertType(\"notification\");reloadForm();case 14:setShowAlert(true);case 15:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return _register.apply(this,arguments);}var handleHideAlert=function handleHideAlert(){setShowAlert(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[showAlert&&/*#__PURE__*/_jsx(Alert,{onClose:handleHideAlert,message:alertMessage,type:alertType}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8 text-left\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-left\",style:{fontWeight:\"bolder\"},children:\"Join As Collaborator!\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:register,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"collaborator_name\",children:\"How should we call you?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",placeholder:\"Name\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",children:[\"Email \",/*#__PURE__*/_jsx(\"small\",{className:\"reminder-text\",children:\"(Please provide a valid email address for activating the account)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-left\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"5px\"},children:\"Submit\"})})]})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Footer,{})]});}export default Register;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}