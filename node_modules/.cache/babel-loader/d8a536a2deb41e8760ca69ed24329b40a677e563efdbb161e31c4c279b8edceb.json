{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/stasy/Desktop/Public+Privacy_0831/public-privacy-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useState}from\"react\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import AuthContext from\"./shared/AuthContext.js\";import{useNavigate}from\"react-router-dom\";import Footer from\"../components/Footer.js\";import Alert from\"./Alert.js\";// Import your Alert component here\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(AuthContext),LogIn=_useContext.LogIn,LogOut=_useContext.LogOut;var email=useRef(\"\");var password=useRef(\"\");var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAlert=_useState2[0],setShowAlert=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alertMessage=_useState4[0],setAlertMessage=_useState4[1];var _useState5=useState(\"notification\"),_useState6=_slicedToArray(_useState5,2),alertType=_useState6[0],setAlertType=_useState6[1];var handleShowAlert=function handleShowAlert(message,type){setAlertMessage(message);setAlertType(type);setShowAlert(true);};var handleHideAlert=function handleHideAlert(){setShowAlert(false);};var loginSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;payload={email:email.current.value,password:password.current.value};if(!document.cookie.includes(\"loginToken\")){_context.next=8;break;}handleShowAlert(\"You are already logged in.\",\"notification\");// Change \"error\" to \"notification\"\nnavigate(\"/about\");return _context.abrupt(\"return\");case 8:_context.next=10;return LogIn(payload);case 10:navigate(\"/collaborator/dashboard\");setTimeout(LogOut,3600000);return _context.abrupt(\"return\");case 13:_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0);handleShowAlert(\"Oops! The input is incorrect. Please try again.\",\"notification\");// Change \"error\" to \"notification\"\ncase 19:_context.prev=19;// This will ensure the alert is shown only if there's an error\nif(!document.cookie.includes(\"loginToken\")){navigate(\"/about\");}return _context.finish(19);case 22:case\"end\":return _context.stop();}},_callee,null,[[0,15,19,22]]);}));return function loginSubmit(){return _ref.apply(this,arguments);};}();var resetPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:navigate(\"/collaborator/resetPassword1\");case 1:case\"end\":return _context2.stop();}},_callee2);}));return function resetPassword(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[showAlert&&/*#__PURE__*/_jsx(Alert,{message:alertMessage,type:alertType,onClose:handleHideAlert}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8 text-left\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-left\",style:{fontWeight:\"bolder\"},children:\"LOGIN\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-8\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlid:\"formEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:email})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlid:\"formPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"button\",onClick:loginSubmit,style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"5px\",outline:\"none\",marginRight:\"2em\"},children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"button\",onClick:resetPassword,style:{backgroundColor:\"black\",color:\"white\",borderRadius:\"5px\",outline:\"none\"},children:\"Reset Password\"})]})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-8 text-left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-left\",style:{fontWeight:\"bolder\"},children:\"FIRST TIME HERE?\"}),/*#__PURE__*/_jsxs(\"h5\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://public-privacy.xyz/#/collaborator/register\",style:{textDecoration:\"underline\",color:\"black\",fontSize:\"smaller\"},children:\"Register\"}),\" \"]})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}